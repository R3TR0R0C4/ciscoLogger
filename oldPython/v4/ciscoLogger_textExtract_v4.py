"""interface_host_text=['Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/1\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/2\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/3\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/4\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/5\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/6\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/7\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/8\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 48 bytes\n!\ninterface GigabitEthernet1/0/9\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/10\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/11\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/12\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/13\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/14\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/15\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 121 bytes\n!\ninterface GigabitEthernet1/0/16\n description cir-pc1-ts-pb001\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/17\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 121 bytes\n!\ninterface GigabitEthernet1/0/18\n description rad_pc1_ts-pb004\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/19\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 123 bytes\n!\ninterface GigabitEthernet1/0/20\n description ws-cons11-pb-pb005\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/21\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 121 bytes\n!\ninterface GigabitEthernet1/0/22\n description desconegut-pb007\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/23\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 121 bytes\n!\ninterface GigabitEthernet1/0/24\n description desconegut-pb008\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/25\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 121 bytes\n!\ninterface GigabitEthernet1/0/26\n description desconegut-pb009\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/27\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 124 bytes\n!\ninterface GigabitEthernet1/0/28\n description prn-cons14-pb-pb010\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/29\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 123 bytes\n!\ninterface GigabitEthernet1/0/30\n description GINE2_PC2_TS-pb011\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/31\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 128 bytes\n!\ninterface GigabitEthernet1/0/32\n description ecograf-cons14-16-pb012\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/33\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 123 bytes\n!\ninterface GigabitEthernet1/0/34\n description prn-matrones-pb013\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/35\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 114 bytes\n!\ninterface GigabitEthernet1/0/36\n description pc1-matro\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/37\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 123 bytes\n!\ninterface GigabitEthernet1/0/38\n description gine2_pc1_ts-pb015\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/39\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 126 bytes\n!\ninterface GigabitEthernet1/0/40\n description minisw-cons4-pb-pb017\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/41\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 122 bytes\n!\ninterface GigabitEthernet1/0/42\n description TRAU-PC1-TS-pb019\n switchport access vlan 186\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/43\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 122 bytes\n!\ninterface GigabitEthernet1/0/44\n description ofta_pc1_ts-pb022\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 49 bytes\n!\ninterface GigabitEthernet1/0/45\n shutdown\nend\n', 'Building configuration...\n\nCurrent configuration : 121 bytes\n!\ninterface GigabitEthernet1/0/46\n description desconegut-pb023\n switchport access vlan 180\n switchport mode access\nend\n', 'Building configuration...\n\nCurrent configuration : 92 bytes\n!\ninterface GigabitEthernet1/0/47\n description UPLINK-TS-P0-SW2\n switchport mode trunk\nend\n', 'Building configuration...\n\nCurrent configuration : 122 bytes\n!\ninterface GigabitEthernet1/0/48\n description ofta_pc2_ts-pb024\n switchport access vlan 180\n switchport mode access\nend\n']
interface_host_text=['Building configuration...\n\nCurrent configuration : 92 bytes\n!\ninterface GigabitEthernet1/0/47\n description UPLINK-TS-P0-SW2\n switchport mode trunk\nend\n', 'Building configuration...\n\nCurrent configuration : 122 bytes\n!\ninterface GigabitEthernet1/0/48\n description ofta_pc2_ts-pb024\n switchport access vlan 180\n switchport mode access\nend\n']
from netmiko import ConnectHandler
import netmiko
import json
import re
from datetime import datetime
import time
interface_info_list = []

for interface_config in interface_host_text:

    print(interface_config)
    
    interface_info = {}
    # Make the "Switchport Mode" line optional using a question mark
    switchport_mode_match = re.search(r'switchport\s+mode:\s+(access|trunk|dynamic\s+(auto|desirable))', interface_config, re.IGNORECASE)
    if switchport_mode_match:
        mode = switchport_mode_match.group(1).title()  # Capitalize first letter
        interface_info['switchport_mode'] = mode
        if mode == "access":
            vlan_match = re.search(r'access\s+vlan:\s+(\d+)', interface_config)
            interface_info['vlan'] = int(vlan_match.group(1)) if vlan_match else None # Use None if no VLAN found
        elif mode == "trunk":
            trunk_vlan_match = re.search(r'allowed\s+vlans:\s+(.+)', interface_config)
            interface_info['vlan'] = trunk_vlan_match.group(1) if trunk_vlan_match else None # Use None if no VLANs found
        else:
            interface_info['vlan'] = "N/A" # Or None
    else:
        interface_info['switchport_mode'] = None
        interface_info['vlan'] = None
    interface_info_list.append(interface_info)
    

print(interface_info_list)"""

import re

interface_host_text=['Building configuration...\n\nCurrent configuration : 92 bytes\n!\ninterface GigabitEthernet1/0/47\n description UPLINK-TS-P0-SW2\n switchport mode trunk\nend\n', 'Building configuration...\n\nCurrent configuration : 122 bytes\n!\ninterface GigabitEthernet1/0/48\n description ofta_pc2_ts-pb024\n switchport access vlan 180\n switchport mode access\nend\n']

interface_info_list = []

for interface_config in interface_host_text:

    print(interface_config)

    interface_info = {}
    # Make the "switchport mode" line optional
    switchport_mode_match = re.search(r'switchport\s+mode\s+(access|trunk|dynamic\s+(auto|desirable))', interface_config, re.IGNORECASE)
    if switchport_mode_match:
        mode = switchport_mode_match.group(1).title()  # Capitalize first letter
        interface_info['switchport_mode'] = mode
        if mode == "Access":
            vlan_match = re.search(r'switchport\s+access\s+vlan\s+(\d+)', interface_config, re.IGNORECASE)
            interface_info['vlan'] = int(vlan_match.group(1)) if vlan_match else None # Use None if no VLAN found
        elif mode == "Trunk":
            trunk_vlan_match = re.search(r'switchport\s+trunk\s+allowed\s+vlan\s+(.+)', interface_config, re.IGNORECASE)
            interface_info['vlan'] = trunk_vlan_match.group(1) if trunk_vlan_match else None # Use None if no VLANs found
        else:
            interface_info['vlan'] = "N/A" # Or None
    else:
        interface_info['switchport_mode'] = None
        interface_info['vlan'] = None
    interface_info_list.append(interface_info)

print(interface_info_list)